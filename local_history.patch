Index: models/db.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- models/db.js	(revision )
+++ models/db.js	(revision )
@@ -1,16 +1,133 @@
+/**
+ * Created by Administrator on 2015/4/25.
+ */
+
+
 var mongoose=require('mongoose');
-mongoose.connect('mongodb://localhost/test');
-var Schema=mongoose.Schema;
+var dbURI='mongodb://localhost/test';
+var dbOptions = {'user':'db_username','pass':'db_password'};
+mongoose.connect(dbURI);
 
-var blogSchema = new Schema({
-    title:  String,
-    author: String,
-    body:   String,
-    comments: [{ body: String, date: Date }],
-    date: { type: Date, default: Date.now },
-    hidden: Boolean,
-    meta: {
-        votes: Number,
-        favs:  Number
+mongoose.connection.on('error',function(err){
+    console.log(err);
+});
+
+mongoose.connection.on('open',function(err){
+    console.log(err);
+});
+
+mongoose.connection.on('connected', function () {
+    console.log('Mongoose connected to ' + dbURI);
+});
+mongoose.connection.on('error',function (err) {
+    console.log('Mongoose connection error: ' + err);
+});
+mongoose.connection.on('disconnected', function () {
+    console.log('Mongoose disconnected');
+});
+mongoose.connection.on('SIGINT', function() {
+    db.close(function () {
+        console.log('Mongoose disconnected through app termination');
+        process.exit(0);
+    });
+});
+
+
+//???
+var userSchema=new mongoose.Schema({
+    name:String,//??????
+    password:String,//???????
+    email:{type:String,unique:true},//????????taoveweb@gmail.com
+    photoUser:String,//??????
+    photos:[Schema.Types.Mixed],//?????????[{id:img_id,src:'photo/ymd/name.png',collect:Number,comment:Number}]
+    message:String,//???
+    collect:[Schema.Types.Mixed],//?????????[{id:img_id,src:'photo/ymd/name.png',collect:collect_id,comment:comment_id,createdOn:Date.now()}]
+    intention:Schema.Types.Mixed,//?????? ??????????§³?? {package:'A',budget:'1500~4000',time:'2015??4??'}
+    isPhotographer:Schema.Types.Mixed,//???????????????photographer_id
+    phone:Number,//???????13621214703
+    createdOn:{type:Date,default :Date.now()},
+    modifiedOn:Date,
+    lastLogin:Date
+});
+var User=mongoose.model('User',userSchema);
+
+
+
+//????
+var photographerSchema=new mongoose.Schema({
+    name:String,//???????????
+    phone:Number,//???????13621214703
+    email:{type:String,unique:true},//????????taoveweb@gmail.com
+    fromTime:Number,//20150202 ??????
+    selfIntroduction:String,//????????
+    goodStyle:String,//??? ?????? ?????? ????? ¦·????? ??????? ????0
+    photoUser:String,//??????????????
+    credentialsPhoto:String,//???????? 'credentials/credentialsPhoto+Date.now().png'
+    city:String,//??????? ????????????
+    makeuper:String,//????????????
+    hot:Number,//???
+    albums:[],//???id albums_id
+    promise:Boolean,//???????????
+    collect:[Schema.Types.Mixed],//?????????[{albumsId:albums_id,imgId:img_id,createdOn:Date.now()}]
+    createdOn:{type:Date,default :Date.now()},
+    modifiedOn:Date,
+    lastLogin:Date
+});
+var Photographer=mongoose.model('Photographer',photographerSchema);
+
+
+
+
+//?????
+var albumsSchema=new mongoose.Schema({
+    projectName:String,//?????
+    photographer:Schema.Types.Mixed,//????:{name:'?????',id:photographer_id}
+    package:String,//???:???A  ????1999  ???:???B  ????1999  ???:???C  ????1999
+    description:String,//????
+    area:String,//???????§Ý??? ???? ????  ????0
+    island:String,//???????????? ????0
+    style:String,//??? ?????? ?????? ????? ¦·????? ??????? ????0
+    img:[Schema.Types.Mixed],/*?????????[
+                                                {
+                                                    id:objectId,
+                                                    path:'photo/ymd/',
+                                                    name:'name.png',
+                                                    collect:collect_id,
+                                                    comment:[{user:user_id,name:user_name,time:comment_time,content:comment_content}],
+                                                    collectUser:[user_id]
-    }
+                                               }
+                                             ]
+                               */
+    createOn:{type:Date,default:Date().now},//???????
+    modifiedOn:Date,//??????
+    createdBy:String,//????????????
+    photoOn:Date,//???????
+    customer:String//??? ??????????§³?? {user:user_id}
-});
\ No newline at end of file
+});
+
+var Albums=mongoose.model('Albums',albumsSchema);
+
+
+
+//???????
+/*var pictureSchema=new mongoose.Schema({
+    projectName:String,//?????
+    pictureName:String,//???????
+    photographer:Schema.Types.Mixed,//????:{name:'?????',id:photographer_id}
+    package:String,//???:???A  ????1999  ???:???B  ????1999  ???:???C  ????1999
+    description:String,//????
+    area:String,//???????§Ý??? ???? ????  ????0
+    island:String,//???????????? ????0
+    style:String,//??? ?????? ?????? ????? ¦·????? ??????? ????0
+    img:[Schema.Types.Mixed],//?????????[{id:img_id,src:'photo/ymd/name.png',collect:Number,comment:Number}]
+    // collect:Number,//???2-------------????????????????????
+    // comment:Number,//??????2------------???????
+    createOn:{type:Date,default:Date().now},//???????
+    modifiedOn:Date,//??????
+    createdBy:String,//????????????
+    photoOn:Date,//???????
+    customer:String//??? ??????????§³?? {user:user_id}
+});
+
+var Picture=mongoose.model('Picture',pictureSchema);*/
+
\ No newline at end of file
